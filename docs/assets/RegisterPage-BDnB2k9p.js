import{_ as R,u as q,h as i,c as a,a as s,i as c,j as h,k as f,v as b,t as y,f as g,d as C,w as P,r as E,p as N,o}from"./index-Cw8tfchD.js";const U={class:"auth-page"},B={class:"auth-container"},O={class:"auth-card card"},D={class:"form-group"},I={key:0,class:"error-message"},M=["disabled"],T={key:0,class:"spinner"},j={key:1},A={class:"step-info"},$={class:"email-display"},z={class:"form-group"},F={key:0,class:"error-message"},G=["disabled"],H={key:0,class:"spinner"},J={key:1},K={class:"form-group"},L={class:"form-group"},Q={key:0,class:"error-message"},W=["disabled"],X={key:0,class:"spinner"},Y={key:1},Z={class:"auth-footer"},ee={__name:"RegisterPage",setup(se){const w=N(),m=q(),d=i("email"),r=i(""),v=i(""),p=i(""),_=i(""),l=i(!1),t=i("");async function k(){if(!r.value){t.value="لطفا ایمیل را وارد کنید";return}l.value=!0,t.value="";const u=await m.checkEmail(r.value);if(!u.success){l.value=!1,t.value=u.message||"خطا در بررسی ایمیل";return}if(u.exists){l.value=!1,t.value="این ایمیل قبلا ثبت شده. از صفحه ورود استفاده کنید.";return}const e=await m.requestOtp(r.value);l.value=!1,e.success?d.value="otp":t.value=e.message||"خطا در ارسال کد تایید"}async function x(){if(!v.value||v.value.length!==6){t.value="کد تایید باید ۶ رقمی باشد";return}l.value=!0,t.value="";const u=await m.verifyOtp(r.value,v.value);l.value=!1,u.success?d.value="password":t.value=u.message||"کد تایید اشتباه است"}async function V(){if(!p.value||p.value.length<6){t.value="رمز عبور باید حداقل ۶ کاراکتر باشد";return}if(p.value!==_.value){t.value="رمز عبور و تکرار آن یکسان نیستند";return}l.value=!0,t.value="";const u=await m.register(r.value,p.value);l.value=!1,u.success?(localStorage.setItem("userEmail",r.value),w.push("/dashboard")):t.value=u.message||"خطا در ثبت نام"}return(u,e)=>{const S=E("router-link");return o(),a("div",U,[s("div",B,[s("div",O,[e[13]||(e[13]=s("div",{class:"auth-header"},[s("div",{class:"free-badge"},[s("span",null,"۷ روز رایگان")]),s("h1",null,"ثبت نام"),s("p",null,"حساب کاربری جدید بسازید و ۷ روز رایگان استفاده کنید")],-1)),d.value==="email"?(o(),a("form",{key:0,onSubmit:h(k,["prevent"]),class:"auth-form"},[s("div",D,[e[5]||(e[5]=s("label",{class:"form-label",for:"email"},"ایمیل",-1)),f(s("input",{type:"email",id:"email","onUpdate:modelValue":e[0]||(e[0]=n=>r.value=n),class:"form-input",placeholder:"email@example.com",required:"",dir:"ltr"},null,512),[[b,r.value]])]),t.value?(o(),a("div",I,y(t.value),1)):c("",!0),s("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:l.value,style:{width:"100%"}},[l.value?(o(),a("span",T)):(o(),a("span",j,"ادامه"))],8,M)],32)):d.value==="otp"?(o(),a("form",{key:1,onSubmit:h(x,["prevent"]),class:"auth-form"},[s("div",A,[e[6]||(e[6]=s("p",null,"کد تایید به ایمیل شما ارسال شد",-1)),s("span",$,y(r.value),1)]),s("div",z,[e[7]||(e[7]=s("label",{class:"form-label",for:"otp"},"کد تایید",-1)),f(s("input",{type:"text",id:"otp","onUpdate:modelValue":e[1]||(e[1]=n=>v.value=n),class:"form-input otp-input",placeholder:"۱۲۳۴۵۶",maxlength:"6",required:"",dir:"ltr"},null,512),[[b,v.value]])]),t.value?(o(),a("div",F,y(t.value),1)):c("",!0),s("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:l.value,style:{width:"100%"}},[l.value?(o(),a("span",H)):(o(),a("span",J,"تایید"))],8,G),s("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=n=>d.value="email"),style:{width:"100%"}}," تغییر ایمیل ")],32)):d.value==="password"?(o(),a("form",{key:2,onSubmit:h(V,["prevent"]),class:"auth-form"},[e[10]||(e[10]=s("div",{class:"step-info"},[s("p",null,"یک رمز عبور برای حساب خود انتخاب کنید")],-1)),s("div",K,[e[8]||(e[8]=s("label",{class:"form-label",for:"password"},"رمز عبور",-1)),f(s("input",{type:"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=n=>p.value=n),class:"form-input",placeholder:"حداقل ۶ کاراکتر",minlength:"6",required:"",dir:"ltr"},null,512),[[b,p.value]])]),s("div",L,[e[9]||(e[9]=s("label",{class:"form-label",for:"confirmPassword"},"تکرار رمز عبور",-1)),f(s("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":e[4]||(e[4]=n=>_.value=n),class:"form-input",placeholder:"تکرار رمز عبور",minlength:"6",required:"",dir:"ltr"},null,512),[[b,_.value]])]),t.value?(o(),a("div",Q,y(t.value),1)):c("",!0),s("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:l.value,style:{width:"100%"}},[l.value?(o(),a("span",X)):(o(),a("span",Y,"ایجاد حساب"))],8,W)],32)):c("",!0),s("div",Z,[s("p",null,[e[12]||(e[12]=g(" حساب کاربری دارید؟ ",-1)),C(S,{to:"/login"},{default:P(()=>[...e[11]||(e[11]=[g("وارد شوید",-1)])]),_:1})])])])])])}}},le=R(ee,[["__scopeId","data-v-855d2bbb"]]);export{le as default};
